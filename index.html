<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Â¡MaxiChat!</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background-color: #e6fffa;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .pantalla {
      display: none;
      flex-direction: column;
      align-items: center;
      background-color: #ffffff;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      width: 90%;
      max-width: 450px;
      transition: all 0.5s ease;
    }

    .visible {
      display: flex;
    }

    h1 {
      color: #25d366;
      margin-bottom: 20px;
    }

    input[type="text"] {
      padding: 12px;
      width: 100%;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 20px;
      font-size: 16px;
    }

    button {
      padding: 12px 20px;
      background-color: #25d366;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #128c7e;
    }

    .loader {
      font-size: 24px;
      animation: blink 1s infinite;
      color: #25d366;
      margin-top: 20px;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
  </style>
</head>
<body>

<div id="pantallaInicio" class="pantalla visible">
  <h1>Â¡MaxiChat! ðŸ’¬</h1>
  <input type="text" id="textoBusqueda" placeholder="Escribe tu mensaje (empieza con <)">
  <button onclick="cambiarPantalla()">Â¡Enviar Mensajes!</button>
  <p style="margin-top: 15px; font-size: 13px; color: #777;">VersiÃ³n demo mejorada.</p>
</div>

<div id="pantallaEnvio" class="pantalla">
  <h1>Enviando... ðŸš€</h1>
  <p class="loader">Abriendo pestaÃ±as...</p>
</div>

<script>
function cambiarPantalla() {
  const texto = document.getElementById("textoBusqueda").value;

  if (!texto.startsWith("<")) {
    alert("Tu mensaje debe comenzar con '<' para esta demo.");
    return;
  }

  if (texto.trim().length <= 1) {
    alert("Por favor, escribe algo mÃ¡s.");
    return;
  }

  // Cambiar de pantalla
  document.getElementById("pantallaInicio").classList.remove("visible");
  document.getElementById("pantallaEnvio").classList.add("visible");

  // Esperar un momento antes de abrir las pestaÃ±as (para ver la transiciÃ³n)
  setTimeout(() => abrirPestanas(texto), 1200);
}

function abrirPestanas(texto) {
  const textoParaBuscar = texto.substring(1);
  const variaciones = ["", ".", "-", "1", "2", "_", "a", "!", "%20"];
  const iconosSimulados = ["âœ¨", "ðŸ”¥", "ðŸš€", "ðŸŒŸ"];
  const numPestanas = 10; // Ajustado para evitar bloqueo del navegador

  for (let i = 0; i < numPestanas; i++) {
    const variacion = variaciones[i % variaciones.length];
    const icono = iconosSimulados[i % iconosSimulados.length];
    const url = "https://www.google.com/search?q=" + encodeURIComponent(textoParaBuscar + variacion);
    const nuevaPestana = window.open(url, "_blank");

    // Intentar cambiar el tÃ­tulo (no funcionarÃ¡ en la mayorÃ­a de dominios externos)
    try {
      if (nuevaPestana) {
        nuevaPestana.document.title = icono + " - MaxiChat";
      }
    } catch (e) {
      // Seguridad del navegador
    }
  }
}
</script>

</body>
</html>
